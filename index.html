<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz √âcologie</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 2rem;
    }
    h1 {
      color: #2b6cb0;
    }
    select, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin-top: 1rem;
    }
    .hidden {
      display: none;
    }
    .question {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 0.3rem 0;
      padding: 0.5rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #e2e8f0;
    }
    .answers button.correct {
      background: #38a169;
      color: white;
    }
    .answers button.incorrect {
      background: #e53e3e;
      color: white;
    }
    #timer {
      margin: 1rem 0;
      font-weight: bold;
      color: #2d3748;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="menu">
      <h1>üåç Quiz Environnement</h1>
      <label for="theme-select">Choisis une th√©matique :</label><br>
      <select id="theme-select">
        <option value="">-- Choisir --</option>
        <option value="üíß Eau">üíß Eau</option>
        <option value="üå§Ô∏è Climat">üå§Ô∏è Climat</option>
        <option value="üå± Biodiversit√©">üå± Biodiversit√©</option>
        <option value="‚ôªÔ∏è Impacts sur Wallis et Futuna">‚ôªÔ∏è Impacts sur Wallis et Futuna</option>
        <option value="‚ö° √ânergie">‚ö° √ânergie</option>
        <option value="üóëÔ∏è D√©chets">üóëÔ∏è D√©chets</option>
        <option value="aleatoire">üé≤ Al√©atoire</option>
      </select><br>
      <button id="start-btn">D√©marrer le quiz</button>
    </div>

    <div id="quiz-container" class="hidden">
      <div id="theme"></div>
      <div id="timer"></div>
      <div id="question" class="question"></div>
      <div id="answers" class="answers"></div>
      <button id="next-btn" class="hidden">Question suivante</button>
    </div>
  </div>

  <script>
    const questions = [
      {
        theme: "üíß Eau",
        question: "üíß Eau ‚Äî Question 13 : Qu‚Äôest-ce que le cycle de l‚Äôeau ?",
        choices: [
          "Le trajet de l‚Äôeau dans les tuyaux",
          "La circulation de l‚Äôeau entre mer, atmosph√®re et terres",
          "Le processus de traitement de l‚Äôeau potable",
          "Le recyclage de l‚Äôeau us√©e"
        ],
        answer: "La circulation de l‚Äôeau entre mer, atmosph√®re et terres"
      },
      {
        theme: "üíß Eau",
        question: "üíß Eau ‚Äî Question 14 : Quelle proportion de l‚Äôeau douce est accessible pour la consommation humaine ?",
        choices: ["90%", "70%", "30%", "10%"],
        answer: "10%"
      },
      {
        theme: "üíß Eau",
        question: "üíß Eau ‚Äî Question 15 : Quel est l‚Äôeffet d‚Äôune agriculture intensive sur l‚Äôeau ?",
        choices: [
          "Augmentation de la qualit√©",
          "Pollution par pesticides et engrais",
          "Diminution de la consommation",
          "Am√©lioration de la biodiversit√©"
        ],
        answer: "Pollution par pesticides et engrais"
      },
      {
        theme: "üå§Ô∏è Climat",
        question: "üå§Ô∏è Climat ‚Äî Question 1 : Qu'est-ce que l'effet de serre ?",
        choices: [
          "Le r√©chauffement caus√© par les gaz √† effet de serre",
          "La r√©duction de la couche d'ozone",
          "Le refroidissement de l'atmosph√®re",
          "Une temp√™te tropicale"
        ],
        answer: "Le r√©chauffement caus√© par les gaz √† effet de serre"
      },
      {
        theme: "üå§Ô∏è Climat",
        question: "üå§Ô∏è Climat ‚Äî Question 2 : Quel est le principal gaz √† effet de serre produit par l'activit√© humaine ?",
        choices: [
          "Oxyg√®ne",
          "Dioxyde de carbone (CO2)",
          "Azote",
          "M√©thane"
        ],
        answer: "Dioxyde de carbone (CO2)"
      },
      {
        theme: "üå§Ô∏è Climat",
        question: "üå§Ô∏è Climat ‚Äî Question 3 : Quelle cons√©quence du r√©chauffement climatique menace les zones c√¥ti√®res ?",
        choices: [
          "Augmentation des inondations",
          "Augmentation de la biodiversit√©",
          "Refroidissement des oc√©ans",
          "Stabilisation du climat"
        ],
        answer: "Augmentation des inondations"
      },
      {
        theme: "üå§Ô∏è Climat",
        question: "üå§Ô∏è Climat ‚Äî Question 4 : Quelle √©nergie est renouvelable et ne produit pas de CO2 ?",
        choices: [
          "Charbon",
          "P√©trole",
          "Solaire",
          "Gaz naturel"
        ],
        answer: "Solaire"
      },
      {
        theme: "üå§Ô∏è Climat",
        question: "üå§Ô∏è Climat ‚Äî Question 5 : Quelle mesure aide √† r√©duire les √©missions de gaz √† effet de serre ?",
        choices: [
          "Augmenter la consommation d'√©nergie",
          "Planter des arbres",
          "Augmenter l'utilisation des voitures",
          "D√©forester"
        ],
        answer: "Planter des arbres"
      },
      {
        theme: "üå± Biodiversit√©",
        question: "üå± Biodiversit√© ‚Äî Question 1 : Qu'est-ce que la biodiversit√© ?",
        choices: [
          "La diversit√© des esp√®ces vivantes",
          "Le climat",
          "La pollution",
          "Les √©nergies renouvelables"
        ],
        answer: "La diversit√© des esp√®ces vivantes"
      },
      {
        theme: "üå± Biodiversit√©",
        question: "üå± Biodiversit√© ‚Äî Question 2 : Quelle est une cause majeure de la perte de biodiversit√© ?",
        choices: [
          "La pollution de l‚Äôair",
          "La d√©forestation",
          "Le recyclage",
          "La conservation"
        ],
        answer: "La d√©forestation"
      },
      {
        theme: "‚ôªÔ∏è Impacts sur Wallis et Futuna",
        question: "‚ôªÔ∏è Wallis et Futuna ‚Äî Question 1 : Quelle ressource naturelle est la plus menac√©e √† Wallis et Futuna ?",
        choices: [
          "Le corail",
          "Le p√©trole",
          "Le charbon",
          "Le sable"
        ],
        answer: "Le corail"
      },
      {
        theme: "‚ö° √ânergie",
        question: "‚ö° √ânergie ‚Äî Question 1 : Quelle source d'√©nergie est renouvelable ?",
        choices: [
          "Charbon",
          "Solaire",
          "P√©trole",
          "Gaz naturel"
        ],
        answer: "Solaire"
      },
      {
        theme: "üóëÔ∏è D√©chets",
        question: "üóëÔ∏è D√©chets ‚Äî Question 1 : Quel d√©chet peut √™tre recycl√© ?",
        choices: [
          "Verre",
          "D√©chets organiques",
          "D√©chets non recyclables",
          "D√©chets √©lectroniques"
        ],
        answer: "Verre"
      }
    ];

    let shuffledQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let timerId = null;
    let timeLeft = 20;

    const themeSelect = document.getElementById('theme-select');
    const startBtn = document.getElementById('start-btn');
    const menu = document.getElementById('menu');
    const quizContainer = document.getElementById('quiz-container');
    const questionDisplay = document.getElementById('question');
    const answersContainer = document.getElementById('answers');
    const nextBtn = document.getElementById('next-btn');
    const timerDisplay = document.getElementById('timer');
    const themeDisplay = document.getElementById('theme');

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startQuiz() {
      const selectedTheme = themeSelect.value;
      if (!selectedTheme) {
        alert("Veuillez choisir une th√©matique avant de commencer.");
        return;
      }
      score = 0;
      currentQuestionIndex = 0;

      if (selectedTheme === 'aleatoire') {
        shuffledQuestions = questions.slice();
      } else {
        shuffledQuestions = questions.filter(q => q.theme === selectedTheme);
      }
      shuffle(shuffledQuestions);

      menu.classList.add('hidden');
      quizContainer.classList.remove('hidden');
      themeDisplay.textContent = `Th√©matique : ${selectedTheme === 'aleatoire' ? 'üé≤ Al√©atoire' : selectedTheme}`;
      showQuestion();
    }

    function startTimer() {
      timeLeft = 20;
      timerDisplay.textContent = `‚è≥ Temps restant : ${timeLeft}s`;
      timerId = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `‚è≥ Temps restant : ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timerId);
          disableAnswers();
          showCorrectAnswer();
          nextBtn.classList.remove('hidden');
        }
      }, 1000);
    }

    function showQuestion() {
      resetState();
      startTimer();

      const currentQuestion = shuffledQuestions[currentQuestionIndex];
      questionDisplay.textContent = currentQuestion.question;

      currentQuestion.choices.forEach(choice => {
        const button = document.createElement('button');
        button.textContent = choice;
        button.addEventListener('click', selectAnswer);
        answersContainer.appendChild(button);
      });

      nextBtn.classList.add('hidden');
    }

    function resetState() {
      clearInterval(timerId);
      timerDisplay.textContent = "";
      nextBtn.classList.add('hidden');
      while (answersContainer.firstChild) {
        answersContainer.removeChild(answersContainer.firstChild);
      }
    }

    function selectAnswer(e) {
      clearInterval(timerId);
      const selectedBtn = e.target;
      const answer = selectedBtn.textContent;
      const correctAnswer = shuffledQuestions[currentQuestionIndex].answer;

      disableAnswers();

      if (answer === correctAnswer) {
        selectedBtn.classList.add('correct');
        score++;
      } else {
        selectedBtn.classList.add('incorrect');
        Array.from(answersContainer.children).forEach(button => {
          if (button.textContent === correctAnswer) {
            button.classList.add('correct');
          }
        });
      }
      nextBtn.classList.remove('hidden');
    }

    function disableAnswers() {
      Array.from(answersContainer.children).forEach(button => {
        button.disabled = true;
      });
    }

    function showCorrectAnswer() {
      const correctAnswer = shuffledQuestions[currentQuestionIndex].answer;
      Array.from(answersContainer.children).forEach(button => {
        if (button.textContent === correctAnswer) {
          button.classList.add('correct');
        } else {
          button.disabled = true;
        }
      });
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < shuffledQuestions.length) {
        showQuestion();
      } else {
        endQuiz();
      }
    }

    function endQuiz() {
      resetState();
      timerDisplay.textContent = "";
      questionDisplay.textContent = `Quiz termin√© ! Votre score : ${score} / ${shuffledQuestions.length}.`;
      answersContainer.innerHTML = "";

      const ratio = score / shuffledQuestions.length;
      let message;
      if (ratio === 1) message = "üéâ Parfait !";
      else if (ratio >= 0.8) message = "üëç Tr√®s bien jou√© !";
      else if (ratio >= 0.5) message = "üòä Pas mal, continue !";
      else message = "üí™ Encore un effort !";

      const scoreMsg = document.createElement('p');
      scoreMsg.id = 'score-message';
      scoreMsg.textContent = message;
      answersContainer.appendChild(scoreMsg);

      const citation = document.createElement('p');
      citation.id = 'citation';
      citation.textContent = '‚ÄúLa Terre ne nous appartient pas, nous l‚Äôempruntons √† nos enfants.‚Äù ‚Äì Proverbe am√©rindien';
      answersContainer.appendChild(citation);

      const backBtn = document.createElement('button');
      backBtn.id = 'back-btn';
      backBtn.textContent = 'Retour au menu';
      backBtn.addEventListener('click', () => {
        quizContainer.classList.add('hidden');
        menu.classList.remove('hidden');
        themeSelect.value = "";
      });
      answersContainer.appendChild(backBtn);
    }

    startBtn.addEventListener('click', startQuiz);
    nextBtn.addEventListener('click', nextQuestion);
  </script>
</body>
</html>
